<!DOCTYPE html>
<html lang="en" class="Internet-Draft">
<head>
<meta charset="utf-8">
<meta content="Common,Latin" name="scripts">
<meta content="initial-scale=1.0" name="viewport">
<title>VCON for MIMI Messages</title>
<meta content="Rohan Mahy" name="author">
<meta content="
       This document describes extensions to the Virtualized Conversation (VCON) syntax for instant messaging systems using the More Instant Messaging Interoperability (MIMI) content format. 
    " name="description">
<meta content="xml2rfc 3.30.2" name="generator">
<meta content="instant messaging" name="keyword">
<meta content="message history" name="keyword">
<meta content="draft-mahy-vcon-mimi-messages-latest" name="ietf.draft">
<!-- Generator version information:
  xml2rfc 3.30.2
    Python 3.12.11
    ConfigArgParse 1.7
    google-i18n-address 3.1.1
    intervaltree 3.1.0
    Jinja2 3.1.6
    lxml 5.3.1
    platformdirs 4.4.0
    pycountry 24.6.1
    PyYAML 6.0.2
    requests 2.32.5
    setuptools 80.9.0
    wcwidth 0.2.14
-->
<link href="draft-mahy-vcon-mimi-messages.xml" rel="alternate" type="application/rfc+xml">
<link href="#copyright" rel="license">
<style type="text/css">@font-face {
  font-family: 'Lora';
  font-style: italic;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Italic'), local('Lora-Italic'), url('https://martinthomson.github.io/rfc-css/fonts/lora-italic-cyrillic-ext.woff2') format('woff2');
  unicode-range: U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
}
@font-face {
  font-family: 'Lora';
  font-style: italic;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Italic'), local('Lora-Italic'), url('https://martinthomson.github.io/rfc-css/fonts/lora-italic-cyrillic-ext.woff2') format('woff2');
  unicode-range: U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
}
@font-face {
  font-family: 'Lora';
  font-style: italic;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Italic'), local('Lora-Italic'), url('https://martinthomson.github.io/rfc-css/fonts/lora-italic-vietnamese.woff2') format('woff2');
  unicode-range: U+0102-0103, U+0110-0111, U+1EA0-1EF9, U+20AB;
}
@font-face {
  font-family: 'Lora';
  font-style: italic;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Italic'), local('Lora-Italic'), url('https://martinthomson.github.io/rfc-css/fonts/lora-italic-latin-ext.woff2') format('woff2');
  unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
}

@font-face {
  font-family: 'Lora';
  font-style: italic;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Italic'), local('Lora-Italic'), url('https://martinthomson.github.io/rfc-css/fonts/lora-italic-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Regular'), local('Lora-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/lora-regular-cyrillic-ext.woff2') format('woff2');
  unicode-range: U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Regular'), local('Lora-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/lora-regular-cyrillic.woff2') format('woff2');
  unicode-range: U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Regular'), local('Lora-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/lora-regular-vietnamese.woff2') format('woff2');
  unicode-range: U+0102-0103, U+0110-0111, U+1EA0-1EF9, U+20AB;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Regular'), local('Lora-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/lora-regular-latin-ext.woff2') format('woff2');
  unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Regular'), local('Lora-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/lora-regular-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}

@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: local('Lora Bold'), local('Lora-Bold'), url('https://martinthomson.github.io/rfc-css/fonts/lora-bold-cyrillic-ext.woff2') format('woff2');
  unicode-range: U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: local('Lora Bold'), local('Lora-Bold'), url('https://martinthomson.github.io/rfc-css/fonts/lora-bold-cyrillic.woff2') format('woff2');
  unicode-range: U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: local('Lora Bold'), local('Lora-Bold'), url('https://martinthomson.github.io/rfc-css/fonts/lora-bold-vietnamese.woff2') format('woff2');
  unicode-range: U+0102-0103, U+0110-0111, U+1EA0-1EF9, U+20AB;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: local('Lora Bold'), local('Lora-Bold'), url('https://martinthomson.github.io/rfc-css/fonts/lora-bold-latin-ext.woff2') format('woff2');
  unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: local('Lora Bold'), local('Lora-Bold'), url('https://martinthomson.github.io/rfc-css/fonts/lora-bold-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 600;
  font-display: swap;
  src: local('Lora SemiBold'), local('Lora-SemiBold'), url('https://martinthomson.github.io/rfc-css/fonts/lora-semibold-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}

@font-face {
  font-family: 'Oxygen Mono';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Oxygen Mono'), local('OxygenMono-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/oxygenmono-regular-latin-ext.woff2') format('woff2');
  unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
}
@font-face {
  font-family: 'Oxygen Mono';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Oxygen Mono'), local('OxygenMono-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/oxygenmono-regular-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}

@font-face {
  font-family: 'Sofia Sans Semi Condensed';
  font-style: italic;
  font-weight: 1 1000;
  src: url('https://martinthomson.github.io/rfc-css/fonts/sofiasanssemicondensed-italic-cyrillic-ext.woff2') format('woff2');
  unicode-range: U+0460-052F, U+1C80-1C8A, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
}
@font-face {
  font-family: 'Sofia Sans Semi Condensed';
  font-style: italic;
  font-weight: 1 1000;
  src: url('https://martinthomson.github.io/rfc-css/fonts/sofiasanssemicondensed-italic-cyrillic.woff2') format('woff2');
  unicode-range: U+0301, U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
}
@font-face {
  font-family: 'Sofia Sans Semi Condensed';
  font-style: italic;
  font-weight: 1 1000;
  src: url('https://martinthomson.github.io/rfc-css/fonts/sofiasanssemicondensed-italic-greek.woff2') format('woff2');
  unicode-range: U+0370-0377, U+037A-037F, U+0384-038A, U+038C, U+038E-03A1, U+03A3-03FF;
}
@font-face {
  font-family: 'Sofia Sans Semi Condensed';
  font-style: italic;
  font-weight: 1 1000;
  src: url('https://martinthomson.github.io/rfc-css/fonts/sofiasanssemicondensed-italic-latin-ext.woff2') format('woff2');
  unicode-range: U+0100-02BA, U+02BD-02C5, U+02C7-02CC, U+02CE-02D7, U+02DD-02FF, U+0304, U+0308, U+0329, U+1D00-1DBF, U+1E00-1E9F, U+1EF2-1EFF, U+2020, U+20A0-20AB, U+20AD-20C0, U+2113, U+2C60-2C7F, U+A720-A7FF;
}
@font-face {
  font-family: 'Sofia Sans Semi Condensed';
  font-style: italic;
  font-weight: 1 1000;
  src: url('https://martinthomson.github.io/rfc-css/fonts/sofiasanssemicondensed-italic-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+0304, U+0308, U+0329, U+2000-206F, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}
@font-face {
  font-family: 'Sofia Sans Semi Condensed';
  font-style: normal;
  font-weight: 1 1000;
  src: url('https://martinthomson.github.io/rfc-css/fonts/sofiasanssemicondensed-regular-cyrillic-ext.woff2') format('woff2');
  unicode-range: U+0460-052F, U+1C80-1C8A, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
}
@font-face {
  font-family: 'Sofia Sans Semi Condensed';
  font-style: normal;
  font-weight: 1 1000;
  src: url('https://martinthomson.github.io/rfc-css/fonts/sofiasanssemicondensed-regular-cyrillic.woff2') format('woff2');
  unicode-range: U+0301, U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
}
@font-face {
  font-family: 'Sofia Sans Semi Condensed';
  font-style: normal;
  font-weight: 1 1000;
  src: url('https://martinthomson.github.io/rfc-css/fonts/sofiasanssemicondensed-regular-greek.woff2') format('woff2');
  unicode-range: U+0370-0377, U+037A-037F, U+0384-038A, U+038C, U+038E-03A1, U+03A3-03FF;
}
@font-face {
  font-family: 'Sofia Sans Semi Condensed';
  font-style: normal;
  font-weight: 1 1000;
  src: url('https://martinthomson.github.io/rfc-css/fonts/sofiasanssemicondensed-regular-latin-ext.woff2') format('woff2');
  unicode-range: U+0100-02BA, U+02BD-02C5, U+02C7-02CC, U+02CE-02D7, U+02DD-02FF, U+0304, U+0308, U+0329, U+1D00-1DBF, U+1E00-1E9F, U+1EF2-1EFF, U+2020, U+20A0-20AB, U+20AD-20C0, U+2113, U+2C60-2C7F, U+A720-A7FF;
}
@font-face {
  font-family: 'Sofia Sans Semi Condensed';
  font-style: normal;
  font-weight: 1 1000;
  src: url('https://martinthomson.github.io/rfc-css/fonts/sofiasanssemicondensed-regular-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+0304, U+0308, U+0329, U+2000-206F, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}

:root {
  color-scheme: light dark;
  --background-color: #fff;
  --text-color: #222;
  --title-color: #191919;
  --link-color: #2a6496;
  --highlight-color: #f9f9f9;
  --line-color: #eee;
  --pilcrow-weak: #ddd;
  --pilcrow-strong: #bbb;
  --small-font-size: 14.5px;
  --font-mono: 'Oxygen Mono', monospace;
  --font-title: "Sofia Sans Semi Condensed", sans-serif;
  scrollbar-color: #bbb #eee;
}
body {
  max-width: 600px;
  margin: 75px auto;
  padding: 0 5px;
  color: var(--text-color);
  background-color: var(--background-color);
  font: 16px/22px "Lora", serif;
  scroll-behavior: smooth;
}

.ears {
  display: none;
}

/* headings */
section {
  clear: both;
}
.section-number {
  padding-right: 0.5em;
}
h1, h2, h3, h4, h5, h6 {
  font-family: var(--font-title);
  font-weight: 680;
  margin: 0.8em 0 0.3em;
  font-size-adjust: 0.5;
  color: var(--title-color);
}
h1#title {
  font-size: 32px;
  line-height: 40px;
  clear: both;
}
h1#title, h1#rfcnum {
  margin: 1.5em 0 0.2em;
}
h1#rfcnum + h1#title {
  margin: 0.2em 0;
}

h1, h2, h3 {
  font-size: 22px;
  line-height: 27px;
}
h4, h5, h6 {
  font-size: 20px;
  line-height: 24px;
}

/* general structure */
.author {
  padding-bottom: 0.3em;
  vertical-align: top;
}
#abstract+p {
  font-size: 18px;
  line-height: 24px;
}
#abstract+p code, #abstract+p samp, #abstract+p tt {
  font-size: 16px;
  line-height: 0;
}

p {
  padding: 0;
  margin: 0.5em 0;
  text-align: left;
}
div {
  margin: 0;
}
.alignRight.art-text {
  background-color: var(--highlight-color);
  border: 1px solid var(--line-color);
  border-radius: 3px;
  padding: 0.5em 1em 0;
  margin-bottom: 0.5em;
}
.alignRight.art-text pre {
  padding: 0;
  width: auto;
}
.alignRight {
  margin: 1em 0;
}
.alignRight > *:first-child {
  border: none;
  margin: 0;
  float: right;
  clear: both;
}
.alignRight > *:nth-child(2) {
  clear: both;
  display: block;
  border: none;
}
svg {
  display: block;
}
/* font-family isn't space-separated, but =~ will have to do */
svg[font-family~="monospace" i], svg [font-family~="monospace" i] {
  font-family: var(--font-mono);
}
.alignCenter.art-text {
  background-color: var(--highlight-color);
  border: 1px solid var(--line-color);
  border-radius: 3px;
  padding: 0.5em 1em 0;
  margin-bottom: 0.5em;
}
.alignCenter.art-text pre {
  padding: 0;
  width: auto;
}
.alignCenter {
  margin: 1em 0;
}
.alignCenter > *:first-child {
  border: none;
  /* this isn't optimal, but it's an existence proof.  PrinceXML doesn't
     support flexbox yet.
  */
  display: table;
  margin: 0 auto;
}

/* lists */
ol, ul {
  padding: 0;
  margin: 0 0 0.5em 2em;
  & :is(ol, ul) {
    margin-left: 1em;
  }
}
li {
  margin: 0 0 0.25em 0;
}
ul.empty, .ulEmpty {
  list-style-type: none;
  & li {
    margin-top: 0.5em;
  }
}
:is(ul, ol).compact, .ulCompact, .olCompact {
  margin: 0 0 0 2em;
  & li {
    margin: 0;
    & :first-child { margin-top: 0; }
    & :last-child { margin-bottom: 0; }
  }
}

/* definition lists */
dl {
  clear: left;
  --indent: 3ch;
  /* --indent: attr(indent ch); not supported in any browser, but we can dream */
  &.olPercent {
    --indent: 5ch;
    & > dt {
      min-width: calc(var(--indent) - 2ch);
    }
  }
  &.olPercent > dt {
    float: none;
  }

  dl > dd > & {
    margin-top: 0.5em;
    margin-bottom: 0;
  }
}
dl:not(.dlNewline) > dt {
  float: left;
  margin-right: 2ch;
  min-width: 8ch;
}
dl > dd {
  margin-bottom: .8em;
  margin-left: var(--indent) !important; /* stupid element overrides */
  min-height: 2ex;
}
:is(dl.compact, .dlCompact) > dd {
  margin-bottom: 0;
  & > :is(:first-child, .break:first-child + *) {
    margin-top: 0;
  }
  & > :is(:last-child) {
    margin-bottom: 0;
  }
}
:is(dd, span).break {
  display: none;
}

/* links */
a, a[href].selfRef:hover {
  text-decoration: none;
}
a[href] {
  color: var(--link-color);
}
a[href].selfRef, .iref + a[href].internal {
  color: var(--text-color);
}
a[href]:hover {
  text-decoration: underline;
}
a[href].selfRef:hover {
  background-color: var(--highlight-color);
}
a.xref:is(.cite, .auto), :is(#status-of-memo, #copyright) a {
  white-space: nowrap;
}

/* Figures */
tt, code, pre {
  background-color: var(--highlight-color);
  font: 14px/22px var(--font-mono);
}
tt, code {
  /* changing the font for inline elements leads to different ascender
     and descender heights; as we want to retain baseline alignment,
     remove leading to avoid altering the final height of lines
     note: this fails if these blocks take an entire line,
     a different solution would be great */
  line-height: 0;
}
:is(h1, h2, h3, h4, h5, h6) :is(tt, code) {
  font-size: 84%;
}
pre {
  border: 1px solid var(--line-color);
  font-size: 13.5px;
  line-height: 16px;
  letter-spacing: -0.2px;
  margin: 5px;
  padding: 5px;
}
img {
  max-width: 100%;
}
figure {
  margin: 0.5em 0;
  padding: 0;
}
figure blockquote {
  margin: 0.8em 0.4em 0.4em;
}
figcaption, caption {
  font-style: italic;
  margin: 0.5em 1.5em;
  text-align: left;
  caption-side: bottom;
}
@media screen {
  /* Auto-collapse boilerplate. */
  :is(#status-of-memo, #copyright) p {
    margin: -2px 0;
    max-height: 0;
    transition: max-height 2s ease, margin 0.5s ease 0.5s;
    overflow: hidden;
  }
  :is(#status-of-memo, #copyright):hover p,
  :is(#status-of-memo, #copyright) h2:target ~ p {
    margin: 0.5em 0;
    max-height: 500px;
    overflow: auto;
  }
  pre, svg {
    display: inline-block;
    /* In the horizontal direction, sometimes people make over-sized figures.
       Scrollbars for those is therefore necessary: auto adds them as necessary..
       In the vertical direction, the line-height can combine with the font
       asender/descender height to produce scrollbars: hidden avoids that. */
    overflow: auto hidden;
  }
  pre {
    max-width: 100%;
    width: calc(100% - 22px - 1em);
  }
  svg {
    max-width: calc(100% - 22px - 1em);
  }
  figure pre {
    display: block;
    width: calc(100% - 25px);
  }
  :is(pre, svg) + .pilcrow {
    display: inline-block;
    vertical-align: text-bottom;
    padding-bottom: 8px;
  }
}

/* aside, blockquote */
aside, blockquote {
  margin-left: 0;
  padding: 0 2em;
  font-style: italic;
}
blockquote {
  margin: 1em 0;
}
cite {
  display: block;
  text-align: right;
  font-style: italic;
}

/* tables */
table {
  width: auto;
  max-width: 100%;
  margin: 0 0 1em;
  border-collapse: collapse;
}
table.right {
  margin-left: auto;
}
table.center {
  margin-left: auto;
  margin-right: auto;
}
table.left {
  margin-right: auto;
}
table .text-left {
  text-align: left;
}
table .text-center {
  text-align: center;
}
table .text-right {
  text-align: right;
}

thead, tbody {
  border: 1px solid var(--line-color);
}
th, td {
  text-align: left;
  vertical-align: top;
  padding: 5px 10px;
}
th {
  background-color: var(--line-color);
}
:is(tr:nth-child(2n), thead+tbody > tr:nth-child(2n+1)) > td {
  background-color: var(--background-color);
}
:is(tr:nth-child(2n+1), thead+tbody > tr:nth-child(2n)) > td {
  background-color: var(--highlight-color);
}
table caption {
  margin: 0;
  padding: 3px 0 3px 1em;
}
table p {
  margin: 0;
}

/* pilcrow */
a.pilcrow {
  margin-left: 3px;
  opacity: 0.2;
  user-select: none;
  &[href] {
    color: var(--pilcrow-weak);
    &:hover { text-decoration: none; }
  }
}
@media not print {
  :hover > a.pilcrow {
    opacity: 1;
  }
  a.pilcrow[href]:hover {
    color: var(--pilcrow-strong);
    background-color: transparent;
  }
}
@media print {
  a.pilcrow {
    display: none;
  }
}

/* misc */
hr {
  border: 0;
  border-top: 1px solid var(--line-color);
}
.bcp14 {
  font-variant: small-caps;
  font-weight: 600;
  font-size: var(--small-font-size);
}
.role {
  font-variant: all-small-caps;
}
sub, sup {
  line-height: 1;
  font-size: 80%;
}

/* info block */
#identifiers {
  margin: 0;
  font-size: var(--small-font-size);
  line-height: 18px;
  --identifier-width: 15ch;
  & dt {
    width: var(--identifier-width);
    min-width: var(--identifier-width);
    clear: left;
    float: left;
    text-align: right;
    margin-right: 1ch;
  }
  & dd {
    margin: 0;
    margin-left: calc(1em + var(--identifier-width)) !important;
    min-width: 5em;
  }
  & .authors {
    & .author {
      display: inline-block;
      margin-right: 1.5em;
    }
    & .org {
      font-style: italic;
    }
  }
}

/* The prepared/rendered info at the very bottom of the page */
.docInfo {
  color: #999;
  font-size: 0.9em;
  font-style: italic;
  margin-top: 2em;
}
.docInfo .prepared {
  float: right;
}

/* table of contents */
#toc {
  padding: 0.75em 0 2em 0;
  margin-bottom: 1em;

  & nav {
    & ul {
      margin: 0 0.5em 0 0;
      padding: 0;
      list-style: none;
    }
    & li {
      line-height: 1.3em;
      margin: 2px 0;
      padding-left: 1.2em;
      text-indent: -1.2em;
    }
  }
  & a.xref {
    white-space: normal;
  }
}

.references {
  & > dt {
    text-align: right;
    font-weight: bold;
    min-width: 10ch;
    margin-right: 1.5ch;
    &:target::before {
      content: "⇒";
      margin: 0 10px 0 -25px;
    }
  }
  & > dd {
    margin-left: 12ch !important;
    overflow: visible;
    & .refInstance {
      margin-bottom: 0.8em;
    }
    & .ascii {
      margin-bottom: 0.25em;
    }
  }
}

#rfc\.index\.index + ul {
  margin-left: 0;
}

/* authors */
address.vcard {
  font-style: normal;
  max-width: 20em;
  margin: 1em auto 1em 0;

  & .nameRole {
    font-weight: 700;
    margin-left: 0;
  }
  & .label {
    margin: 0.5em 0;
  }
  & .type {
    display: none;
  }
  & .alternative-contact {
    margin: 0.5em 0 0.25em 0;
  }
  & .non-ascii {
    margin: 0 0 0 2em;
  }
  & div.left {
    text-align: left;
  }
  & div.right {
    text-align: right;
  }
}

hr.addr {
  border-top: 1px dashed;
  margin: 0;
  color: #ddd;
  max-width: calc(100% - 16px);
}
@media (min-width: 500px) {
  #authors-addresses > section {
    column-count: 2;
    column-gap: 20px;
  }
  #authors-addresses > section > h2 {
    column-span: all;
  }
  /* hack for break-inside: avoid-column */
  #authors-addresses address {
    display: inline-block;
    break-inside: avoid-column;
  }
}

/* Comments */
.rfcEditorRemove p:first-of-type {
  font-style: italic;
}
.cref {
  background-color: rgba(249, 232, 105, 0.3);
  padding: 2px 4px;
}
.crefSource {
  font-style: italic;
}

@media screen {
  #toc nav {
    font-family: var(--font-title);
    font-weight: 360;
    & > ul { margin-bottom: 2em; }
    & ul {
      margin: 0 0 0 4px;
      & :is(p, li) {
        margin: 2px 0;
      }
    }
  }
  #toc a.toplink {
    float: right;
  }
}
@media not screen {
  #toc a.toplink {
    display: none;
  }
}


/* TOC layout for smaller screens */
@media screen and (max-width: 929px) {
  #toc {
    position: fixed;
    z-index: 2;
    top: 0;
    right: 0;
    padding: 1px 0 0 0;
    margin: 0;
    border-bottom: 1px solid #ccc;
    opacity: 0.6;
  }
  #toc h2 {
    margin: 0;
    padding: 2px 0 2px 6px;
    padding-right: 1em;
    font-size: 18px;
    line-height: 24px;
    min-width: 190px;
    text-align: right;
    background-color: #444;
    color: white;
    cursor: pointer;
    &::before { /* css hamburger */
      float: right;
      position: relative;
      width: 1em;
      height: 1px;
      left: -164px;
      margin: 8px 0 0 0;
      background: white none repeat scroll 0 0;
      box-shadow: 0 4px 0 0 white, 0 8px 0 0 white;
      content: "";
    }
  }
  #toc nav {
    display: none;
    background-color: var(--background-color);
    padding: 0.5em 1em 1em;
    overflow: auto;
    overscroll-behavior: contain;
    height: calc(100vh - 48px);
    border-left: 1px solid #ddd;
  }
  #toc.active {
    opacity: 1;
    & nav { display: block; }
  }
  /* Make the collapsed ToC header render white on gray also when it's a link */
  #toc h2 a,
  #toc h2 a:is(:link, :focus, :hover),
  #toc a.toplink,
  #toc a.toplink:hover {
    color: white;
    background-color: #444;
    text-decoration: none;
  }
  #toc a.toplink {
    margin: 2px 0.5em 0;
  }
}

/* TOC layout for wide screens */
@media screen and (min-width: 930px) {
  body {
    padding-right: 360px;
    padding-right: calc(min(180px + 20%, 500px));
  }
  #toc {
    position: fixed;
    bottom: 0;
    right: 0;
    right: calc(50vw - 480px);
    width: 312px;
    margin: 0;
    padding: 0;
    z-index: 1;
  }
  #toc h2 {
    margin: 0;
    padding: 0.25em 1em 1em 0;
  }
  #toc nav {
    display: block;
    height: calc(90vh - 84px);
    bottom: 0;
    padding: 0.5em 0 2em;
    overflow: auto;
    overscroll-behavior: contain;
    scrollbar-width: thin;
  }
  img { /* future proofing */
    max-width: 100%;
    height: auto;
  }
  #toc a.toplink {
    margin: 8px 0.5em 0;
  }
}

/* pagination */
@media print {
  body {
    width: 100%;
  }
  p {
    orphans: 3;
    widows: 3;
  }
  #n-copyright-notice {
    border-bottom: none;
  }
  #toc, #n-introduction {
    page-break-before: always;
  }
  #toc {
    border-top: none;
    padding-top: 0;
  }
  figure, pre, .vcard {
    page-break-inside: avoid;
  }
  h1, h2, h3, h4, h5, h6 {
    page-break-after: avoid;
  }
  :is(h2, h3, h4, h5, h6)+*, dd {
    page-break-before: avoid;
  }
  pre {
    white-space: pre-wrap;
    word-wrap: break-word;
    font-size: 10pt;
  }
  table {
    border: 1px solid #ddd;
  }
  td {
    border-top: 1px solid #ddd;
  }
}

@page :first {
  padding-top: 0;
  @top-left {
    content: normal;
    border: none;
  }
  @top-center {
    content: normal;
    border: none;
  }
  @top-right {
    content: normal;
    border: none;
  }
}

@page {
  size: A4;
  margin-bottom: 45mm;
  padding-top: 20px;
}

/* Dark mode. */
@media (prefers-color-scheme: dark) {
:root {
  --background-color: #121212;
  --text-color: #f0f0f0;
  --title-color: #fff;
  --link-color: #4da4f0;
  --highlight-color: #282828;
  --line-color: #444;
  --pilcrow-weak: #444;
  --pilcrow-strong: #666;
  scrollbar-color: #777 #333;
}
}

/* SVG Trick: a prefix match works because only black and white are allowed */
svg :is([stroke="black"], [stroke^="#000"]) {
  stroke: var(--text-color);
}
svg :is([stroke="white"], [stroke^="#fff"]) {
  stroke: var(--background-color);
}
svg :is([fill="black"], [fill^="#000"], :not([fill])) {
  fill: var(--text-color);
}
svg :is([fill="white"], [fill^="#fff"]) {
  fill: var(--background-color);
}
</style>

</head>
<body class="xml2rfc">
<table class="ears">
<thead><tr>
<td class="left">Internet-Draft</td>
<td class="center">VCON for MIMI</td>
<td class="right">October 2025</td>
</tr></thead>
<tfoot><tr>
<td class="left">Mahy</td>
<td class="center">Expires 20 April 2026</td>
<td class="right">[Page]</td>
</tr></tfoot>
</table>
<div id="external-metadata" class="document-information"></div>
<div id="internal-metadata" class="document-information">
<dl id="identifiers">
<dt class="label-workgroup">Workgroup:</dt>
<dd class="workgroup">Virtualized Conversations</dd>
<dt class="label-internet-draft">Internet-Draft:</dt>
<dd class="internet-draft">draft-mahy-vcon-mimi-messages-latest</dd>
<dt class="label-published">Published:</dt>
<dd class="published">
<time datetime="2025-10-17" class="published">17 October 2025</time>
    </dd>
<dt class="label-intended-status">Intended Status:</dt>
<dd class="intended-status">Informational</dd>
<dt class="label-expires">Expires:</dt>
<dd class="expires"><time datetime="2026-04-20">20 April 2026</time></dd>
<dt class="label-authors">Author:</dt>
<dd class="authors">
<div class="author">
      <div class="author-name">R. Mahy</div>
<div class="org">Rohan Mahy Consulting Services</div>
</div>
</dd>
</dl>
</div>
<h1 id="title">VCON for MIMI Messages</h1>
<section id="section-abstract">
      <h2 id="abstract"><a href="#abstract" class="selfRef">Abstract</a></h2>
<p id="section-abstract-1">This document describes extensions to the Virtualized Conversation (VCON) syntax for instant messaging systems using the More Instant Messaging Interoperability (MIMI) content format.<a href="#section-abstract-1" class="pilcrow">¶</a></p>
</section>
<section class="note rfcEditorRemove" id="section-note.1">
      <h2 id="name-about-this-document">
<a href="#name-about-this-document" class="section-name selfRef">About This Document</a>
      </h2>
<p id="section-note.1-1">This note is to be removed before publishing as an RFC.<a href="#section-note.1-1" class="pilcrow">¶</a></p>
<p id="section-note.1-2">
        The latest revision of this draft can be found at <span><a href="https://rohanmahy.github.io/vcon-mimi-messages/draft-mahy-vcon-mimi-messages.html">https://rohanmahy.github.io/vcon-mimi-messages/draft-mahy-vcon-mimi-messages.html</a></span>.
        Status information for this document may be found at <span><a href="https://datatracker.ietf.org/doc/draft-mahy-vcon-mimi-messages/">https://datatracker.ietf.org/doc/draft-mahy-vcon-mimi-messages/</a></span>.<a href="#section-note.1-2" class="pilcrow">¶</a></p>
<p id="section-note.1-3">
        Discussion of this document takes place on the
        Virtualized Conversations Working Group mailing list (<span><a href="mailto:vcon@ietf.org">mailto:vcon@ietf.org</a></span>),
        which is archived at <span><a href="https://mailarchive.ietf.org/arch/browse/vcon/">https://mailarchive.ietf.org/arch/browse/vcon/</a></span>.
        Subscribe at <span><a href="https://www.ietf.org/mailman/listinfo/vcon/">https://www.ietf.org/mailman/listinfo/vcon/</a></span>.<a href="#section-note.1-3" class="pilcrow">¶</a></p>
<p id="section-note.1-4">Source for this draft and an issue tracker can be found at
        <span><a href="https://github.com/rohanmahy/vcon-mimi-messages">https://github.com/rohanmahy/vcon-mimi-messages</a></span>.<a href="#section-note.1-4" class="pilcrow">¶</a></p>
</section>
<div id="status-of-memo">
<section id="section-boilerplate.1">
        <h2 id="name-status-of-this-memo">
<a href="#name-status-of-this-memo" class="section-name selfRef">Status of This Memo</a>
        </h2>
<p id="section-boilerplate.1-1">
        This Internet-Draft is submitted in full conformance with the
        provisions of BCP 78 and BCP 79.<a href="#section-boilerplate.1-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-2">
        Internet-Drafts are working documents of the Internet Engineering Task
        Force (IETF). Note that other groups may also distribute working
        documents as Internet-Drafts. The list of current Internet-Drafts is
        at <span><a href="https://datatracker.ietf.org/drafts/current/">https://datatracker.ietf.org/drafts/current/</a></span>.<a href="#section-boilerplate.1-2" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-3">
        Internet-Drafts are draft documents valid for a maximum of six months
        and may be updated, replaced, or obsoleted by other documents at any
        time. It is inappropriate to use Internet-Drafts as reference
        material or to cite them other than as "work in progress."<a href="#section-boilerplate.1-3" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-4">
        This Internet-Draft will expire on 20 April 2026.<a href="#section-boilerplate.1-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="copyright">
<section id="section-boilerplate.2">
        <h2 id="name-copyright-notice">
<a href="#name-copyright-notice" class="section-name selfRef">Copyright Notice</a>
        </h2>
<p id="section-boilerplate.2-1">
            Copyright (c) 2025 IETF Trust and the persons identified as the
            document authors. All rights reserved.<a href="#section-boilerplate.2-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.2-2">
            This document is subject to BCP 78 and the IETF Trust's Legal
            Provisions Relating to IETF Documents
            (<span><a href="https://trustee.ietf.org/license-info">https://trustee.ietf.org/license-info</a></span>) in effect on the date of
            publication of this document. Please review these documents
            carefully, as they describe your rights and restrictions with
            respect to this document. Code Components extracted from this
            document must include Revised BSD License text as described in
            Section 4.e of the Trust Legal Provisions and are provided without
            warranty as described in the Revised BSD License.<a href="#section-boilerplate.2-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="toc">
<section id="section-toc.1">
        <a href="#" onclick="scroll(0,0)" class="toplink">▲</a><h2 id="name-table-of-contents">
<a href="#name-table-of-contents" class="section-name selfRef">Table of Contents</a>
        </h2>
<nav class="toc"><ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1">
            <p id="section-toc.1-1.1.1" class="keepWithNext"><a href="#section-1" class="auto internal xref">1</a>.  <a href="#name-introduction" class="internal xref">Introduction</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2">
            <p id="section-toc.1-1.2.1" class="keepWithNext"><a href="#section-2" class="auto internal xref">2</a>.  <a href="#name-conventions-and-definitions" class="internal xref">Conventions and Definitions</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3">
            <p id="section-toc.1-1.3.1"><a href="#section-3" class="auto internal xref">3</a>.  <a href="#name-syntax" class="internal xref">Syntax</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.1">
                <p id="section-toc.1-1.3.2.1.1" class="keepWithNext"><a href="#section-3.1" class="auto internal xref">3.1</a>.  <a href="#name-room-information" class="internal xref">Room information</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.2">
                <p id="section-toc.1-1.3.2.2.1"><a href="#section-3.2" class="auto internal xref">3.2</a>.  <a href="#name-parties" class="internal xref">Parties</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.3">
                <p id="section-toc.1-1.3.2.3.1"><a href="#section-3.3" class="auto internal xref">3.3</a>.  <a href="#name-the-dialog-object-text-type" class="internal xref">The dialog object (text type)</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.3.2.1">
                    <p id="section-toc.1-1.3.2.3.2.1.1"><a href="#section-3.3.1" class="auto internal xref">3.3.1</a>.  <a href="#name-semantics-of-the-existing-f" class="internal xref">Semantics of the existing fields for text</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.3.2.2">
                    <p id="section-toc.1-1.3.2.3.2.2.1"><a href="#section-3.3.2" class="auto internal xref">3.3.2</a>.  <a href="#name-extensions-to-the-dialog-ob" class="internal xref">Extensions to the dialog object for text</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.3.2.3">
                    <p id="section-toc.1-1.3.2.3.2.3.1"><a href="#section-3.3.3" class="auto internal xref">3.3.3</a>.  <a href="#name-multi_part-objects" class="internal xref">multi_part objects</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.3.2.4">
                    <p id="section-toc.1-1.3.2.3.2.4.1"><a href="#section-3.3.4" class="auto internal xref">3.3.4</a>.  <a href="#name-part-objects" class="internal xref">Part objects</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.3.2.5">
                    <p id="section-toc.1-1.3.2.3.2.5.1"><a href="#section-3.3.5" class="auto internal xref">3.3.5</a>.  <a href="#name-external_part-objects" class="internal xref">external_part objects</a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.4">
                <p id="section-toc.1-1.3.2.4.1"><a href="#section-3.4" class="auto internal xref">3.4</a>.  <a href="#name-changes-to-the-parties" class="internal xref">Changes to the parties</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.5">
                <p id="section-toc.1-1.3.2.5.1"><a href="#section-3.5" class="auto internal xref">3.5</a>.  <a href="#name-changes-to-the-room" class="internal xref">Changes to the room</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.6">
                <p id="section-toc.1-1.3.2.6.1"><a href="#section-3.6" class="auto internal xref">3.6</a>.  <a href="#name-attachments" class="internal xref">Attachments</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.7">
                <p id="section-toc.1-1.3.2.7.1"><a href="#section-3.7" class="auto internal xref">3.7</a>.  <a href="#name-message-tombstones" class="internal xref">Message tombstones</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4">
            <p id="section-toc.1-1.4.1"><a href="#section-4" class="auto internal xref">4</a>.  <a href="#name-examples" class="internal xref">Examples</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.1">
                <p id="section-toc.1-1.4.2.1.1"><a href="#section-4.1" class="auto internal xref">4.1</a>.  <a href="#name-mimi-examples-as-a-vcon" class="internal xref">MIMI examples as a VCON</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.2">
                <p id="section-toc.1-1.4.2.2.1"><a href="#section-4.2" class="auto internal xref">4.2</a>.  <a href="#name-mimi-vcon-with-an-attachmen" class="internal xref">MIMI VCON with an Attachment</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5">
            <p id="section-toc.1-1.5.1"><a href="#section-5" class="auto internal xref">5</a>.  <a href="#name-security-considerations" class="internal xref">Security Considerations</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6">
            <p id="section-toc.1-1.6.1"><a href="#section-6" class="auto internal xref">6</a>.  <a href="#name-iana-considerations" class="internal xref">IANA Considerations</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.1">
                <p id="section-toc.1-1.6.2.1.1"><a href="#section-6.1" class="auto internal xref">6.1</a>.  <a href="#name-room-object-and-registry" class="internal xref">Room object and registry</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.2">
                <p id="section-toc.1-1.6.2.2.1"><a href="#section-6.2" class="auto internal xref">6.2</a>.  <a href="#name-room-description-object-and" class="internal xref">Room description object and registry</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.3">
                <p id="section-toc.1-1.6.2.3.1"><a href="#section-6.3" class="auto internal xref">6.3</a>.  <a href="#name-party-object-types" class="internal xref">Party object types</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.4">
                <p id="section-toc.1-1.6.2.4.1"><a href="#section-6.4" class="auto internal xref">6.4</a>.  <a href="#name-dialog-object-types" class="internal xref">Dialog object types</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.5">
                <p id="section-toc.1-1.6.2.5.1"><a href="#section-6.5" class="auto internal xref">6.5</a>.  <a href="#name-dialog_type-object-types" class="internal xref">dialog_type object types</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.6">
                <p id="section-toc.1-1.6.2.6.1"><a href="#section-6.6" class="auto internal xref">6.6</a>.  <a href="#name-multi_part-object-type" class="internal xref">multi_part object type</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.7">
                <p id="section-toc.1-1.6.2.7.1"><a href="#section-6.7" class="auto internal xref">6.7</a>.  <a href="#name-parts" class="internal xref">parts</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.8">
                <p id="section-toc.1-1.6.2.8.1"><a href="#section-6.8" class="auto internal xref">6.8</a>.  <a href="#name-part-object-type" class="internal xref">part object type</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.9">
                <p id="section-toc.1-1.6.2.9.1"><a href="#section-6.9" class="auto internal xref">6.9</a>.  <a href="#name-external_part-object-type" class="internal xref">external_part object type</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.10">
                <p id="section-toc.1-1.6.2.10.1"><a href="#section-6.10" class="auto internal xref">6.10</a>. <a href="#name-party_history-object-type" class="internal xref">party_history object type</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.11">
                <p id="section-toc.1-1.6.2.11.1"><a href="#section-6.11" class="auto internal xref">6.11</a>. <a href="#name-party_event-object-type" class="internal xref">party_event object type</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.12">
                <p id="section-toc.1-1.6.2.12.1"><a href="#section-6.12" class="auto internal xref">6.12</a>. <a href="#name-attachment-object-type" class="internal xref">attachment object type</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7">
            <p id="section-toc.1-1.7.1"><a href="#section-7" class="auto internal xref">7</a>.  <a href="#name-normative-references" class="internal xref">Normative References</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8">
            <p id="section-toc.1-1.8.1"><a href="#appendix-A" class="auto internal xref">Appendix A</a>.  <a href="#name-json-schema" class="internal xref">JSON Schema</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9">
            <p id="section-toc.1-1.9.1"><a href="#appendix-B" class="auto internal xref">Appendix B</a>.  <a href="#name-change-list" class="internal xref">Change list</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9.2.1">
                <p id="section-toc.1-1.9.2.1.1"><a href="#appendix-B.1" class="auto internal xref">B.1</a>.  <a href="#name-changes-in-draft-ietf-vcon-" class="internal xref">Changes in draft-ietf-vcon-mimi-messages-00</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9.2.2">
                <p id="section-toc.1-1.9.2.2.1"><a href="#appendix-B.2" class="auto internal xref">B.2</a>.  <a href="#name-changes-in-draft-mahy-vcon-" class="internal xref">Changes in draft-mahy-vcon-mimi-messages-02</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10">
            <p id="section-toc.1-1.10.1"><a href="#appendix-C" class="auto internal xref"></a><a href="#name-acknowledgments" class="internal xref">Acknowledgments</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.11">
            <p id="section-toc.1-1.11.1"><a href="#appendix-D" class="auto internal xref"></a><a href="#name-authors-address" class="internal xref">Author's Address</a></p>
</li>
        </ul>
</nav>
</section>
</div>
<div id="introduction">
<section id="section-1">
      <h2 id="name-introduction">
<a href="#section-1" class="section-number selfRef">1. </a><a href="#name-introduction" class="section-name selfRef">Introduction</a>
      </h2>
<p id="section-1-1">VCON <span>[<a href="#I-D.ietf-vcon-vcon-core" class="cite xref">I-D.ietf-vcon-vcon-core</a>]</span> is a format for recording and transmitting conversations. MIMI content <span>[<a href="#I-D.ietf-mimi-content" class="cite xref">I-D.ietf-mimi-content</a>]</span> is a format for conveying Instant Messages in an interoperable way when end-to-end encrypted.
This document extends VCON, describing a way to translate a set of MIMI messages in a conversation or part of a conversation into a VCON.<a href="#section-1-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="conventions-and-definitions">
<section id="section-2">
      <h2 id="name-conventions-and-definitions">
<a href="#section-2" class="section-number selfRef">2. </a><a href="#name-conventions-and-definitions" class="section-name selfRef">Conventions and Definitions</a>
      </h2>
<p id="section-2-1">The key words "<span class="bcp14">MUST</span>", "<span class="bcp14">MUST NOT</span>", "<span class="bcp14">REQUIRED</span>", "<span class="bcp14">SHALL</span>", "<span class="bcp14">SHALL NOT</span>", "<span class="bcp14">SHOULD</span>", "<span class="bcp14">SHOULD NOT</span>", "<span class="bcp14">RECOMMENDED</span>", "<span class="bcp14">NOT RECOMMENDED</span>",
"<span class="bcp14">MAY</span>", and "<span class="bcp14">OPTIONAL</span>" in this document are to be interpreted as
described in BCP 14 <span>[<a href="#RFC2119" class="cite xref">RFC2119</a>]</span> <span>[<a href="#RFC8174" class="cite xref">RFC8174</a>]</span> when, and only when, they
appear in all capitals, as shown here.<a href="#section-2-1" class="pilcrow">¶</a></p>
<p id="section-2-2">The examples in this document may contain base64url encoded values that have extra whitespace added for readability, and to conform with Internet-Draft formatting conventions. That whitespace should be ignored.<a href="#section-2-2" class="pilcrow">¶</a></p>
<p id="section-2-3">Some metadata about a MIMI content message is conveyed in the encryption protocol Messaging Layer Security (MLS) <span>[<a href="#RFC9420" class="cite xref">RFC9420</a>]</span> or in the MIMI protocol <span>[<a href="#I-D.ietf-mimi-protocol" class="cite xref">I-D.ietf-mimi-protocol</a>]</span>.<a href="#section-2-3" class="pilcrow">¶</a></p>
<p id="section-2-4">For example, the sender, recipient, date, and message ID are not mandatory fields in a MIMI content message.
The recipient is the MIMI room ID associated with the corresponding MLS group.
The participants in the group are calculated from the MLS group state and MIMI participant list during the MLS "epoch" in which the message was sent.
The sender is conveyed in MLS.
The MIMI "Hub" received timestamp is conveyed in the MIMI protocol.
The MIMI content message ID is constructed by hashing fields from the MIMI content, and the sender and room URIs (see <span><a href="https://datatracker.ietf.org/doc/html/draft-ietf-mimi-content-07#section-3.3" class="relref">Section 3.3</a> of [<a href="#I-D.ietf-mimi-content" class="cite xref">I-D.ietf-mimi-content</a>]</span>).<a href="#section-2-4" class="pilcrow">¶</a></p>
<p id="section-2-5">When message franking is enabled, as defined in <span><a href="https://datatracker.ietf.org/doc/html/draft-ietf-mimi-protocol-04#section-5.4.1" class="relref">Section 5.4.1</a> of [<a href="#I-D.ietf-mimi-protocol" class="cite xref">I-D.ietf-mimi-protocol</a>]</span>, the <code>franking_tag</code> is conveyed in the MLS message's Additional Authenticated Data (AAD) field, while the MIMI protocol conveys the <code>Frank</code> structure generated by the MIMI Hub.<a href="#section-2-5" class="pilcrow">¶</a></p>
<p id="section-2-6">The room metadata described in this document comes from <span><a href="https://datatracker.ietf.org/doc/html/draft-mahy-mimi-app-components-01#section-3" class="relref">Section 3</a> of [<a href="#I-D.mahy-mimi-app-components" class="cite xref">I-D.mahy-mimi-app-components</a>]</span>, while the names of the parties comes from the participant list defined in Section 4 of the same document.<a href="#section-2-6" class="pilcrow">¶</a></p>
</section>
</div>
<div id="syntax">
<section id="section-3">
      <h2 id="name-syntax">
<a href="#section-3" class="section-number selfRef">3. </a><a href="#name-syntax" class="section-name selfRef">Syntax</a>
      </h2>
<p id="section-3-1">A MIMI conversation (or portion thereof) is represented in VCON with
a mandatory list of parties and dialogs, a new top-level room object,
and optionally attachment objects.<a href="#section-3-1" class="pilcrow">¶</a></p>
<div id="room-information">
<section id="section-3.1">
        <h3 id="name-room-information">
<a href="#section-3.1" class="section-number selfRef">3.1. </a><a href="#name-room-information" class="section-name selfRef">Room information</a>
        </h3>
<p id="section-3.1-1">This document adds a mandatory, top-level <code>room</code> object. It contains metadata
known about the room at the start of the VCON period.<a href="#section-3.1-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-3.1-2.1">
            <p id="section-3.1-2.1.1"><code>id</code> is the MIMI room ID URL. It is mandatory.<a href="#section-3.1-2.1.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-3.1-2.2">
            <p id="section-3.1-2.2.1"><code>name</code> is the textual name of the room. It is optional.<a href="#section-3.1-2.2.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-3.1-2.3">
            <p id="section-3.1-2.3.1"><code>avatar</code> is a URL referencing the room image. It is optional.<a href="#section-3.1-2.3.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-3.1-2.4">
            <p id="section-3.1-2.4.1"><code>subject</code> is the room subject. It is optional.<a href="#section-3.1-2.4.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-3.1-2.5">
            <p id="section-3.1-2.5.1"><code>mood</code> is the room mood. It is optional<a href="#section-3.1-2.5.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-3.1-2.6">
            <p id="section-3.1-2.6.1"><code>description</code> is an array of room_description objects. It is optional. Each object can contain:<a href="#section-3.1-2.6.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-3.1-2.6.2.1">
                <p id="section-3.1-2.6.2.1.1">a <code>type</code>- a media type or an empty string. It is optional. It's default value is <code>text/plain;charset=UTF-8</code>.<a href="#section-3.1-2.6.2.1.1" class="pilcrow">¶</a></p>
</li>
              <li class="normal" id="section-3.1-2.6.2.2">
                <p id="section-3.1-2.6.2.2.1">a <code>lang</code> - a <code>Language-tag</code> as defined by <span>[<a href="#RFC5646" class="cite xref">RFC5646</a>]</span>. It is optional.<a href="#section-3.1-2.6.2.2.1" class="pilcrow">¶</a></p>
</li>
              <li class="normal" id="section-3.1-2.6.2.3">
                <p id="section-3.1-2.6.2.3.1">a <code>content</code> - if the <code>type</code> begins with "text" or is empty, the content the is UTF-8 text description of the room. Otherwise it is the base64url encoding of whatever type is described. The <code>content</code> field is mandatory in a room_description object.<a href="#section-3.1-2.6.2.3.1" class="pilcrow">¶</a></p>
</li>
            </ul>
</li>
        </ul>
</section>
</div>
<div id="parties">
<section id="section-3.2">
        <h3 id="name-parties">
<a href="#section-3.2" class="section-number selfRef">3.2. </a><a href="#name-parties" class="section-name selfRef">Parties</a>
        </h3>
<p id="section-3.2-1">The <code>parties</code> array <span class="bcp14">MUST</span> contain all the
participants who were in the conversation at any point in time during the
period represented by the VCON. The first party in the array is the MIMI room URI.<a href="#section-3.2-1" class="pilcrow">¶</a></p>
<p id="section-3.2-2">This document adds a new party_object_type: <code>im_uri</code>. It is mandatory.
The <code>name</code> field is optional. The <code>role</code> indicates the MIMI role and is
optional. The document also adds a <code>thumbprint</code> party_object_type, which is
the JWK thumbprint of the public key of the party. If there are multiple
parties (clients) with the same <code>im_uri</code> then the thumbprint is required,
otherwise it is optional.<a href="#section-3.2-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="the-dialog-object-text-type">
<section id="section-3.3">
        <h3 id="name-the-dialog-object-text-type">
<a href="#section-3.3" class="section-number selfRef">3.3. </a><a href="#name-the-dialog-object-text-type" class="section-name selfRef">The dialog object (text type)</a>
        </h3>
<p id="section-3.3-1">The following section refers to changes and additions to the dialog object when the <code>type</code> field is "text".<a href="#section-3.3-1" class="pilcrow">¶</a></p>
<div id="semantics-of-the-existing-fields-for-text">
<section id="section-3.3.1">
          <h4 id="name-semantics-of-the-existing-f">
<a href="#section-3.3.1" class="section-number selfRef">3.3.1. </a><a href="#name-semantics-of-the-existing-f" class="section-name selfRef">Semantics of the existing fields for text</a>
          </h4>
<p id="section-3.3.1-1">The dialog object consists of an array of instant messages of type "text".
The start time is set to the hub received timestamp when available.
The duration is zero.
The originator is set to the parties index of the sender of the message.
The message_id is the base64url encoding of the MIMI content message ID. It is mandatory.<a href="#section-3.3.1-1" class="pilcrow">¶</a></p>
<p id="section-3.3.1-2">The first MIMI message represented in a MIMI VCON should contain the complete list of parties who were participants in the room at that time.
For subsequent messages, a parties array consisting of index zero, indicates the recipients of the message are the active participants of the room.
Changes to the roster can be tracked if <code>party_history</code> is present for those changes (see <a href="#party-history" class="auto internal xref">Section 3.4</a>).<a href="#section-3.3.1-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="extensions-to-the-dialog-object-for-text">
<section id="section-3.3.2">
          <h4 id="name-extensions-to-the-dialog-ob">
<a href="#section-3.3.2" class="section-number selfRef">3.3.2. </a><a href="#name-extensions-to-the-dialog-ob" class="section-name selfRef">Extensions to the dialog object for text</a>
          </h4>
<p id="section-3.3.2-1">The parties array consist of the party indexes of those who were active participants when the message was sent.<a href="#section-3.3.2-1" class="pilcrow">¶</a></p>
<p id="section-3.3.2-2">-
- <code>salt</code> is the base64url encoding of the MIMI content salt. It is mandatory.
- <code>replaces</code> is the base64url encoding of the MIMI content message_id of the message this message replaces. It is optional if empty.
- <code>topic_id</code> is the base64url encoding of the MIMI topic_id. It is optional if empty.
- <code>expires</code> is optional if empty in MIMI. It contains null or a map with the following items:<a href="#section-3.3.2-2" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-3.3.2-3">
<pre>
* `relative` is a boolean that is true if the time is expressed relative to the recipient read time, and false if it is expressed as an absolute date/time. It is mandatory when `expires` is present.
* `relative_time` is an integer number of seconds. If `relative` is true, once the message has been read, the client is expected to delete the message after `relative_time` seconds. It is mandatory if `relative` is true.
* `absolute_time` is the expiration date/time of the message expressed as a VCON (text) date_type. It is mandatory if `relative` is false and optional otherwise. - `in_reply_to` is the base64url encoding of the MIMI content message_id of the message to which this message is replying (or reacting). It is optional if empty. - `mimi_extensions` is a base64 encoding of the CBOR MIMI content extensions map or null. It is optional if not present in the MIMI content. - `franking_tag` is a base64url encoding of the MIMI `franking_tag`, or null.  It is optional if not present. - `frank` is a base64url encoding of the MIMI protocol `Frank` TLS struct, or null. It is optional if not present.
</pre><a href="#section-3.3.2-3" class="pilcrow">¶</a>
</div>
<p id="section-3.3.2-4">VCON typically expresses message content using the <code>body</code>, <code>encoding</code>, and <code>mediatype</code> fields.
In order to preserve this convention we use these fields directly for a MIMI SinglePart structure, but use new multi_part and external_part objects for the MultiPart and ExternalPart MIMI structures, respectively.
For a SinglePart these two fields with the same semantics as their MIMI content counterparts could be present.<a href="#section-3.3.2-4" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-3.3.2-5.1">
              <p id="section-3.3.2-5.1.1"><code>disposition</code> - optional if set to the default value ("render")<a href="#section-3.3.2-5.1.1" class="pilcrow">¶</a></p>
</li>
            <li class="normal" id="section-3.3.2-5.2">
              <p id="section-3.3.2-5.2.1"><code>language</code> - optional if absent<a href="#section-3.3.2-5.2.1" class="pilcrow">¶</a></p>
</li>
          </ul>
<p id="section-3.3.2-6">If there is only a single part its <code>part_index</code> is 0, and in this case it is optional.<a href="#section-3.3.2-6" class="pilcrow">¶</a></p>
</section>
</div>
<div id="multipart-objects">
<section id="section-3.3.3">
          <h4 id="name-multi_part-objects">
<a href="#section-3.3.3" class="section-number selfRef">3.3.3. </a><a href="#name-multi_part-objects" class="section-name selfRef">multi_part objects</a>
          </h4>
<p id="section-3.3.3-1">A <code>multi_part</code> object is designed to carry multiple items, as with the MultiPart structure in MIMI content or the top level multipart media types. It contains the following fields.<a href="#section-3.3.3-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-3.3.3-2.1">
              <p id="section-3.3.3-2.1.1"><code>part_semantics</code> is one of "chooseOne", "singleUnit", or "processAll". It is mandatory.<a href="#section-3.3.3-2.1.1" class="pilcrow">¶</a></p>
</li>
            <li class="normal" id="section-3.3.3-2.2">
              <p id="section-3.3.3-2.2.1"><code>parts</code> is an array of <code>Part</code> objects. It is mandatory in a <code>multi_part</code> object.<a href="#section-3.3.3-2.2.1" class="pilcrow">¶</a></p>
</li>
          </ul>
</section>
</div>
<div id="part-objects">
<section id="section-3.3.4">
          <h4 id="name-part-objects">
<a href="#section-3.3.4" class="section-number selfRef">3.3.4. </a><a href="#name-part-objects" class="section-name selfRef">Part objects</a>
          </h4>
<p id="section-3.3.4-1">The following fields can be in a Part object. They have the same meaning as their MIMI content counterparts.<a href="#section-3.3.4-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-3.3.4-2.1">
              <p id="section-3.3.4-2.1.1"><code>disposition</code> optional if set to the default value ("render")<a href="#section-3.3.4-2.1.1" class="pilcrow">¶</a></p>
</li>
            <li class="normal" id="section-3.3.4-2.2">
              <p id="section-3.3.4-2.2.1"><code>language</code> - optional if absent<a href="#section-3.3.4-2.2.1" class="pilcrow">¶</a></p>
</li>
            <li class="normal" id="section-3.3.4-2.3">
              <p id="section-3.3.4-2.3.1"><code>part_index</code> is an unsigned integer. It is mandatory in a <code>Part</code> object.<a href="#section-3.3.4-2.3.1" class="pilcrow">¶</a></p>
</li>
            <li class="normal" id="section-3.3.4-2.4">
              <p id="section-3.3.4-2.4.1"><code>cardinality</code> is one of "nullpart", "single", "external", or "multi". mandatory.<a href="#section-3.3.4-2.4.1" class="pilcrow">¶</a></p>
</li>
          </ul>
<p id="section-3.3.4-3">If cardinality is "single" or "external", then <code>body</code>, <code>encoding</code>, and <code>mediatype</code> fields are included directly in the Part object.<a href="#section-3.3.4-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="externalpart-objects">
<section id="section-3.3.5">
          <h4 id="name-external_part-objects">
<a href="#section-3.3.5" class="section-number selfRef">3.3.5. </a><a href="#name-external_part-objects" class="section-name selfRef">external_part objects</a>
          </h4>
<p id="section-3.3.5-1">The <code>external_part</code> object can contain the following fields with similar meanings to those in MIMI content, with exceptions noted below.<a href="#section-3.3.5-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-3.3.5-2.1">
              <p id="section-3.3.5-2.1.1"><code>mediatype</code> is the value of the <code>contentType</code> in MIMI. It is mandatory if present in the MIMI message and recommended otherwise.<a href="#section-3.3.5-2.1.1" class="pilcrow">¶</a></p>
</li>
            <li class="normal" id="section-3.3.5-2.2">
              <p id="section-3.3.5-2.2.1"><code>url</code> is the URL of the content as a text string. It is mandatory<a href="#section-3.3.5-2.2.1" class="pilcrow">¶</a></p>
</li>
            <li class="normal" id="section-3.3.5-2.3">
              <p id="section-3.3.5-2.3.1"><code>expires</code> is a date_type (text) date. It is optional if not present.<a href="#section-3.3.5-2.3.1" class="pilcrow">¶</a></p>
</li>
            <li class="normal" id="section-3.3.5-2.4">
              <p id="section-3.3.5-2.4.1"><code>size</code> is an integer number of octets. It is optional if not present.<a href="#section-3.3.5-2.4.1" class="pilcrow">¶</a></p>
</li>
            <li class="normal" id="section-3.3.5-2.5">
              <p id="section-3.3.5-2.5.1"><code>description</code> is a text string. It is optional if not present.<a href="#section-3.3.5-2.5.1" class="pilcrow">¶</a></p>
</li>
            <li class="normal" id="section-3.3.5-2.6">
              <p id="section-3.3.5-2.6.1"><code>filename</code> is a text string. It is optional if not present.<a href="#section-3.3.5-2.6.1" class="pilcrow">¶</a></p>
</li>
            <li class="normal" id="section-3.3.5-2.7">
              <p id="section-3.3.5-2.7.1"><code>content_hash</code> is the base64url encoded string of the MIMI <code>contentHash</code> of the ExternalPart, prefixed with the name of the hash algorithm corresponding to <code>hashAlg</code> and a colon (for example "sha256:"). <code>content_hash</code> is  mandatory if it was included in the MIMI content ExternalPart, and omitted otherwise.<a href="#section-3.3.5-2.7.1" class="pilcrow">¶</a></p>
</li>
          </ul>
<p id="section-3.3.5-3">In addition, the following fields are unique to MIMI VCON.<a href="#section-3.3.5-3" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-3.3.5-4.1">
              <p id="section-3.3.5-4.1.1"><code>cached</code> is a boolean. It is mandatory if it is true, which means that a
copy of the external content is available in a vcon attachment object
(see <a href="#attachments" class="auto internal xref">Section 3.6</a>). If <code>cache</code> is true and no <code>content_hash</code> is present, a new content hash is calculated for the attachment and placed the <code>cache_ref</code> field (which can only be present in this case).<a href="#section-3.3.5-4.1.1" class="pilcrow">¶</a></p>
</li>
          </ul>
<p id="section-3.3.5-5">external_part has several fields for the decryption of the
referenced content.
If it is not necessary to reconstruct the original MIMI content (for example to allow later verification of the message ID), these fields can be omitted once the content has been downloaded, decrypted, verified, and included in the VCON attachments array. Otherwise they are mandatory if present in the MIMI content.
All of these fields are base64url encoded strings.<a href="#section-3.3.5-5" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-3.3.5-6.1">
              <p id="section-3.3.5-6.1.1"><code>enc_alg</code><a href="#section-3.3.5-6.1.1" class="pilcrow">¶</a></p>
</li>
            <li class="normal" id="section-3.3.5-6.2">
              <p id="section-3.3.5-6.2.1"><code>key</code><a href="#section-3.3.5-6.2.1" class="pilcrow">¶</a></p>
</li>
            <li class="normal" id="section-3.3.5-6.3">
              <p id="section-3.3.5-6.3.1"><code>nonce</code><a href="#section-3.3.5-6.3.1" class="pilcrow">¶</a></p>
</li>
            <li class="normal" id="section-3.3.5-6.4">
              <p id="section-3.3.5-6.4.1"><code>aad</code><a href="#section-3.3.5-6.4.1" class="pilcrow">¶</a></p>
</li>
          </ul>
</section>
</div>
</section>
</div>
<div id="party-history">
<section id="section-3.4">
        <h3 id="name-changes-to-the-parties">
<a href="#section-3.4" class="section-number selfRef">3.4. </a><a href="#name-changes-to-the-parties" class="section-name selfRef">Changes to the parties</a>
        </h3>
<p id="section-3.4-1">The <code>party_history</code> object can be interleaved with text objects in the dialog objects array. It indicates when changes have been made to the participants represented by party index zero, as well as properties of individual parties (such as their role or name).<a href="#section-3.4-1" class="pilcrow">¶</a></p>
<p id="section-3.4-2">The <code>party_history</code> object contains the following fields.<a href="#section-3.4-2" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-3.4-3.1">
            <p id="section-3.4-3.1.1"><code>party</code> is the party index of the modified party. It is mandatory.<a href="#section-3.4-3.1.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-3.4-3.2">
            <p id="section-3.4-3.2.1"><code>originator</code> is the party that originated the change. It is optional.<a href="#section-3.4-3.2.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-3.4-3.3">
            <p id="section-3.4-3.3.1"><code>time</code> is the time that the change was effected<a href="#section-3.4-3.3.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-3.4-3.4">
            <p id="section-3.4-3.4.1"><code>event</code> is the type of change. It is mandatory and for MIMI VCONs can be one of the following new event types:<a href="#section-3.4-3.4.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-3.4-3.4.2.1">
                <p id="section-3.4-3.4.2.1.1"><code>add</code>: user added by someone else<a href="#section-3.4-3.4.2.1.1" class="pilcrow">¶</a></p>
</li>
              <li class="normal" id="section-3.4-3.4.2.2">
                <p id="section-3.4-3.4.2.2.1"><code>self_add</code>: user added herself directly<a href="#section-3.4-3.4.2.2.1" class="pilcrow">¶</a></p>
</li>
              <li class="normal" id="section-3.4-3.4.2.3">
                <p id="section-3.4-3.4.2.3.1"><code>leave</code>: user leaves of their own accord<a href="#section-3.4-3.4.2.3.1" class="pilcrow">¶</a></p>
</li>
              <li class="normal" id="section-3.4-3.4.2.4">
                <p id="section-3.4-3.4.2.4.1"><code>remove</code>: user is removed by another user<a href="#section-3.4-3.4.2.4.1" class="pilcrow">¶</a></p>
</li>
              <li class="normal" id="section-3.4-3.4.2.5">
                <p id="section-3.4-3.4.2.5.1"><code>ban</code>: user is banned from the group<a href="#section-3.4-3.4.2.5.1" class="pilcrow">¶</a></p>
</li>
              <li class="normal" id="section-3.4-3.4.2.6">
                <p id="section-3.4-3.4.2.6.1"><code>update</code>:<a href="#section-3.4-3.4.2.6.1" class="pilcrow">¶</a></p>
</li>
            </ul>
</li>
          <li class="normal" id="section-3.4-3.5">
            <p id="section-3.4-3.5.1"><code>name</code> is the new name of the user. It is only permitted for an update event.<a href="#section-3.4-3.5.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-3.4-3.6">
            <p id="section-3.4-3.6.1"><code>role</code> is the new role assigned to the user. It is only permitted for an update event.<a href="#section-3.4-3.6.1" class="pilcrow">¶</a></p>
</li>
        </ul>
</section>
</div>
<div id="changes-to-the-room">
<section id="section-3.5">
        <h3 id="name-changes-to-the-room">
<a href="#section-3.5" class="section-number selfRef">3.5. </a><a href="#name-changes-to-the-room" class="section-name selfRef">Changes to the room</a>
        </h3>
<p id="section-3.5-1">Changes to the room metadata should be accompanied by a new <code>room</code> dialog type.
The <code>room</code> dialog type can contain anything in the top-level <code>room</code> object except for the <code>id</code> (which cannot change).
It must contain a <code>time</code> field to convey the time of the change, and may contain an <code>originator</code> field to convey who made that change.<a href="#section-3.5-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="attachments">
<section id="section-3.6">
        <h3 id="name-attachments">
<a href="#section-3.6" class="section-number selfRef">3.6. </a><a href="#name-attachments" class="section-name selfRef">Attachments</a>
        </h3>
<p id="section-3.6-1">An attachment consists of the following fields:<a href="#section-3.6-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-3.6-2.1">
            <p id="section-3.6-2.1.1"><code>start</code>: is the time when the attachment was downloaded. It is mandatory.<a href="#section-3.6-2.1.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-3.6-2.2">
            <p id="section-3.6-2.2.1"><code>party</code>: is the party that downloaded the attachment. It is mandatory.<a href="#section-3.6-2.2.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-3.6-2.3">
            <p id="section-3.6-2.3.1"><code>content_hash</code>: is the base64url encoded hash using the hash name prefixed with a colon before the hash (ex: "sha256:"). It is mandatory.<a href="#section-3.6-2.3.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-3.6-2.4">
            <p id="section-3.6-2.4.1"><code>dialog_object_ref</code> is a string consisting of: "mid:" (representing the message ID URI), the message_id of the message in the dialog object, a colon, the part_index of the Part (or "0" if the ExternalPart is at the top level), and the string "@anon.invalid"<a href="#section-3.6-2.4.1" class="pilcrow">¶</a></p>
</li>
        </ul>
<p id="section-3.6-3">The <code>mediatype</code>, <code>filename</code>, <code>encoding</code>, and <code>body</code> fields are as they are defined in VCON and are all mandatory.<a href="#section-3.6-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="message-tombstones">
<section id="section-3.7">
        <h3 id="name-message-tombstones">
<a href="#section-3.7" class="section-number selfRef">3.7. </a><a href="#name-message-tombstones" class="section-name selfRef">Message tombstones</a>
        </h3>
<p id="section-3.7-1">When a message has been deleted/retracted, or it expires, it can be valuable to present a record that such a message was previously present, by generating a dialog object with the following fields (which are all mandatory):<a href="#section-3.7-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-3.7-2.1">
            <p id="section-3.7-2.1.1"><code>type</code> is "tombstone"<a href="#section-3.7-2.1.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-3.7-2.2">
            <p id="section-3.7-2.2.1"><code>start</code> is the time the tombstone was generated<a href="#section-3.7-2.2.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-3.7-2.3">
            <p id="section-3.7-2.3.1"><code>message_id</code> is the message ID of the message.<a href="#section-3.7-2.3.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-3.7-2.4">
            <p id="section-3.7-2.4.1"><code>status</code> is the status of the former message, either "retracted" or "expired".<a href="#section-3.7-2.4.1" class="pilcrow">¶</a></p>
</li>
        </ul>
</section>
</div>
</section>
</div>
<div id="examples">
<section id="section-4">
      <h2 id="name-examples">
<a href="#section-4" class="section-number selfRef">4. </a><a href="#name-examples" class="section-name selfRef">Examples</a>
      </h2>
<div id="mimi-examples-as-a-vcon">
<section id="section-4.1">
        <h3 id="name-mimi-examples-as-a-vcon">
<a href="#section-4.1" class="section-number selfRef">4.1. </a><a href="#name-mimi-examples-as-a-vcon" class="section-name selfRef">MIMI examples as a VCON</a>
        </h3>
<p id="section-4.1-1">The example vcon consists of the example messages from Section 5 of the MIMI content specification plus a <code>party_history</code> object adding two new participants, and a single multipart message at the end.<a href="#section-4.1-1" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-4.1-2">
<pre>
{
  "vcon": "0.0.1",
  "room": {
    "id": "mimi://example.com/r/engineering_team",
    "name": "Engineering Team",
    "avatar": "https://example.com/images/tHMqLMAkmCzNmweL",
    "subject": None,
    "mood": None,
    "description": [
        {"type":"", "lang":"en", "content":"Engineering Team Internal Chat"},
        {  "type":"",
          "lang":"fr",
          "content":"Chat de l'équipe interne des ingénieurs"
        }
    ]
  }
  "parties": [
    {
      "im_uri": "mimi://example.com/r/engineering_team",
    },
    {
      "im_uri": "mimi://example.com/u/alice-smith",
      "name": "Alice Smith",
      "role": "moderator",
      "thumbprint": "TODOFIXDZXCog_FfQp-xLemZkD5GKB9H7Z-Y41O4jEw"
    },
    {
      "im_uri": "mimi://example.com/u/bob-jones",
      "name": "Bob Jones",
      "role": "member",
      "thumbprint": "TODOFIXYUFE7bV9pXAHZHi5bwSWzLJqjncevs9aLKDg"
    },
    {
      "im_uri": "mimi://example.com/u/cathy-washington",
      "name": "Cathy Washington",
      "role": "member",
      "thumbprint": "TODOFIXzH3EeOGbI0-oiDGTXlgKmkMzQyQ2W_Y-TB1U"
    },
    {
      "im_uri": "mimi://example.com/u/doug-king",
      "name": "Doug King",
      "role": "member",
      "thumbprint": "TODOFIX3fdpORnHwncbdOS5XieH-z1m5r61u14WyNkj"
    },
    {
      "im_uri": "mimi://example.com/u/liz-roberts",
      "name": "Elizabeth Roberts",
      "role": "member",
      "thumbprint": "TODOFIX7qR7oFriyKfKgIJ43ZdANoObICqH0kN9g82J"
    }
  ],
  "dialog": [
    {
      "type": "text",
      "start": "2022-02-08T22:13:45.019-00:00",
      "duration": 0,
      "parties": [
        1, 2, 3
      ],
      "franking_tag": null,
      "frank": null,
      "originator": 1,
      "salt": "PC16IkqDbGRiffzjeyPKIg"
      "message_id": "AbAIRGcnPMQ9bw6-rBPrhCKcT__o9sNZTJBfR3eeWnk",
      "mimi_extensions": "oQGiAXgrbWltaTovL2h1Yi5leGFtcGxlL3IvU
          mwzM0ZXTENZV093eEhyWW5wV0RRZwJ4GG1pbWk6Ly9iLmV4YW1wbG
          UvdS9hbGljZQ",
      "mimetype": "text/markdown;variant=GFM",
      "encoding": "none"
      "body":
        "Hi everyone, we just shipped release 2.0. __Good work__!",
    },

    {
      "type": "text",
      "start": "2022-02-08T22:13:57.492-00:00",
      "duration": 0,
      "parties": [
        0
      ],
      "originator": 2,
      "salt": "PVeWNQrjJej4AjhqkGlSkw"
      "message_id": "AaQZrvThbUPPwGwoI17Pvp-uvHQNAUjnyiCyIVCTCDY",
      "in_reply_to": "AbAIRGcnPMQ9bw6-rBPrhCKcT__o9sNZTJBfR3eeWnk",
      "mimetype": "text/markdown;variant=GFM",
      "encoding": "none"
      "body": "Right on! _Congratulations_ \'all!",
    },

    {
      "type": "text",
      "start": "2022-02-08T22:13:57.728-00:00",
      "duration": 0,
      "parties": [
        0
      ],
      "originator": 3,
      "salt": "lV7CoeiFmX4ALPSKOdrR0w"
      "message_id": "AbGhSoj0SA4TNr6GmHhU-Dij7IKUTUUz2NQIhXhVDtc",
      "in_reply_to": "AbAIRGcnPMQ9bw6-rBPrhCKcT__o9sNZTJBfR3eeWnk",
      "disposition": "reaction",
      "mimetype": "text/plain;charset=utf-8",
      "encoding": "none"
      "body": "❤",
    },

    {
      "type": "text",
      "start": "2022-02-08T22:14:03.008-00:00",
      "duration": 0,
      "parties": [
        0
      ],
      "originator": 3,
      "salt": "pkL5Tr0pLla5EiLUOfVDJw"
      "message_id": "rF4iS5BcJ-aFfisoFDCrnTE9pZZBGCxGCoXGJ9VXnck",
      "mimetype": "text/markdown;variant=GFM",
      "encoding": "none"
      "body":
        "Kudos to [@Alice Smith](mimi://example.com/alice-smith) for
making the release happen!",
    },

    {
      "type": "text",
      "start": "2022-02-08T22:14:08.621-00:00",
      "duration": 0,
      "parties": [
        0
      ],
      "originator": 2,
      "salt": "26QI8adeG9TDfPvh-j1Stg"
      "message_id": "-GqJXuoaJu1Xosu-N8nt6NWzA2RLmIRY0q9jf_kvWkM",
      "replaces": "AaQZrvThbUPPwGwoI17Pvp-uvHQNAUjnyiCyIVCTCDY",
      "in_reply_to": "AbAIRGcnPMQ9bw6-rBPrhCKcT__o9sNZTJBfR3eeWnk",
      "mimetype": "text/markdown;variant=GFM",
      "encoding": "none"
      "body": "Right on! _Congratulations_ y'all"
    },

    {
      "type": "text",
      "start": "2022-02-08T22:14:08.621-00:00",
      "duration": 0,
      "parties": [
        0
      ],
      "originator": 2,
      "salt": "HbkjCnTRrhn84LPT86VvYg"
      "message_id": "8cqo1B9IA6nnB63oPEnmWxIqr7uk7WvQTBgVVlD_Q2c",
      "replaces": "AaQZrvThbUPPwGwoI17Pvp-uvHQNAUjnyiCyIVCTCDY",
      "in_reply_to": "AbAIRGcnPMQ9bw6-rBPrhCKcT__o9sNZTJBfR3eeWnk"
    },
    {
      "party_history": [
        {
          "party": 4,
          "event": "add",
          "originator": 1,
          "time": "2022-02-08T22:14:09.277-00:00"
        },
        {
          "party": 5,
          "event": "add",
          "originator": 1,
          "time": "2022-02-08T22:14:09.277-00:00"
        }
      ]
    },
    {
      "type": "text",
      "start": "2022-02-08T22:14:10.389-00:00",
      "duration": 0,
      "parties": [
        0
      ],
      "originator": 3,
      "salt": "IrAeojgZcZGiQjjBbmqVhw"
      "message_id": "bYZ2NHaryq0WS2pq5IE9fMc4zltUyE6WrKJ7bNB5tMc",
      "replaces": "AaQZrvThbUPPwGwoI17Pvp-uvHQNAUjnyiCyIVCTCDY",
      "in_reply_to": "AbAIRGcnPMQ9bw6-rBPrhCKcT__o9sNZTJBfR3eeWnk",
      "disposition": "reaction"
    },

    {
      "type": "text",
      "start": "2022-02-08T22:49:06.227-00:00",
      "duration": 0,
      "parties": [
        0
      ],
      "originator": 1,
      "salt": "8xnQi9hjVw4N8cRGEm4X1A"
      "message_id": "GkblzkXJxyar0lTgkfcMQ0wo8qpbcU0MqtTg-gM1FiY",
      "expiring": {
        "relative": false,
        "expires": "2022-02-08T22:59:06.227-00:00"
      },
      "status": "expired"
    },

    {
      "type": "text",
      "start": "2022-02-08T22:53:41.134-00:00",
      "duration": 0,
      "parties": [
        0
      ],
      "originator": 2,
      "salt": "bqhJBqYaTyDmgTj-QtdZPA"
      "message_id": "Tdt8UCUl1ugSLRmuObvib_4bvu_Hz3NSwaYuy-TtET4",
      "disposition": "attachment",
      "language": "en",
      "external_part": {
        "mimetype": "video/mp4",
        "url": "https://example.com/storage/8ksB4bSrrRE.mp4",
        "size": 708234961,
        "description": "2 hours of key signing video",
        "filename": "bigfile.mp4",
        "content_hash":
            "sha256:OczZYpW_L0B1DsMSLJqL2jTRJKoj7fTUJ2jhnX70-00",
        "enc_alg": 1,
        "key": "aZISOs306M7n_3csR-J1cw",
        "nonce": "5VM0QcZI3PNmnquV6CUgxg",
        "aad": ""
      }
    },

    {
      "type": "text",
      "start": "2022-02-08T22:54:09.972-00:00",
      "duration": 0,
      "parties": [
        0
      ],
      "originator": 3,
      "salt": "dPEJAGOdZGeX6_OCp0RUzA"
      "message_id": "KgDTc29ZP4YyYmXtaYyxpZNrnigjvCjrCYuLTz19zWc",
      "disposition": "session",
      "external_part": {
        "url": "https://example.com/join/12345",
        "description": "Join the Foo 118 conference"
      }
    },
    {
      "type": "text",
      "start": "2022-02-08T22:57:14.084-00:00",
      "duration": 0,
      "parties": [
        0
      ],
      "originator": 1,
      "salt": "YSbs-8jeoXfI6Z4lQRUWQw"
      "message_id": "sD19bKRmu4mA9SHznfQOLQQzKnx1Q4mEtSNQhvzqCZw",
      "disposition": "render",
      "part_index": 0,
      "multi_part": {
        "part_semantics": "chooseOne",
        "parts": [
          {
            "disposition": "render",
            "language": "en",
            "part_index": 1,
            "mimetype": "text/markdown;variant=GFM",
            "encoding": "none"
            "body": "Hello!"
          },
          {
            "disposition": "render",
            "language": "fr",
            "part_index": 2,
            "mimetype": "text/markdown;variant=GFM",
            "encoding": "none"
            "body": "Bonjour!"
          }
        ]
      }
    },
  ]
}
</pre><a href="#section-4.1-2" class="pilcrow">¶</a>
</div>
</section>
</div>
<div id="mimi-vcon-with-an-attachment">
<section id="section-4.2">
        <h3 id="name-mimi-vcon-with-an-attachmen">
<a href="#section-4.2" class="section-number selfRef">4.2. </a><a href="#name-mimi-vcon-with-an-attachmen" class="section-name selfRef">MIMI VCON with an Attachment</a>
        </h3>
<p id="section-4.2-1">This example vcon consists of a single message in a dialog which references
an attachment.<a href="#section-4.2-1" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-4.2-2">
<pre>
{
  "vcon": "0.0.1",
  "room": {
    "id": "mimi://example.com/r/engineering_team",
    "name": "Engineering Team",
  }
  "parties": [
    {
      "imUri": "mimi://example.com/r/engineering_team",
    },
    {
      "im_uri": "mimi://example.com/u/alice-smith",
      "name": "Alice Smith",
      "role": "moderator",
      "thumbprint": "TODOFIXDZXCog_FfQp-xLemZkD5GKB9H7Z-Y41O4jEw"
    },
    {
      "im_uri": "mimi://example.com/u/bob-jones",
      "name": "Bob Jones",
      "role": "member",
      "thumbprint": "TODOFIXYUFE7bV9pXAHZHi5bwSWzLJqjncevs9aLKDg"
    },
    {
      "im_uri": "mimi://example.com/u/cathy-washington",
      "name": "Cathy Washington",
      "role": "member",
      "thumbprint": "TODOFIXzH3EeOGbI0-oiDGTXlgKmkMzQyQ2W_Y-TB1U"
    }
  ],
  "dialog": [
    {
      "type": "text",
      "start": "2022-02-08T22:53:41.134-00:00",
      "duration": 0,
      "parties": [
        0, 1, 2, 3
      ],
      "originator": 1,
      "salt": "jaPfwAWReuvBdfayWkSvtQ"
      "message_id": "Tdt8UCUl1ugSLRmuObvib_4bvu_Hz3NSwaYuy-TtET4",
      "disposition": "attachment",
      "language": "en",
      "external_part": {
        "mimetype": "video/mp4",
        "url": "https://example.com/storage/8ksB4bSrrRE.mp4",
        "size": 708234961,
        "description": "2 hours of key signing video",
        "filename": "bigfile.mp4",
        "content_hash":
            "sha256:OczZYpW_L0B1DsMSLJqL2jTRJKoj7fTUJ2jhnX70-00",
        "cached": true
      }
    },
  ],
  "attachments": [
    {
      "start": "2022-02-08T22:53:41.134-00:00",
      "party": 1,
      "content_hash":
          "sha256:OczZYpW_L0B1DsMSLJqL2jTRJKoj7fTUJ2jhnX70-00",
      "dialog_object_ref":
  "mid:Tdt8UCUl1ugSLRmuObvib_4bvu_Hz3NSwaYuy-TtET4:0@anon.invalid",
      "mimetype": "video/mp4",
      "filename": "bigfile.mp4",
      "encoding": "base64url",
      "body": "Ma0hHSr0f_iUk_RSShTgtY...nSQbZEip5danJYQqsvwWQ"
    }
  ]
}
</pre><a href="#section-4.2-2" class="pilcrow">¶</a>
</div>
</section>
</div>
</section>
</div>
<div id="security-considerations">
<section id="section-5">
      <h2 id="name-security-considerations">
<a href="#section-5" class="section-number selfRef">5. </a><a href="#name-security-considerations" class="section-name selfRef">Security Considerations</a>
      </h2>
<p id="section-5-1">TODO Security<a href="#section-5-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="iana-considerations">
<section id="section-6">
      <h2 id="name-iana-considerations">
<a href="#section-6" class="section-number selfRef">6. </a><a href="#name-iana-considerations" class="section-name selfRef">IANA Considerations</a>
      </h2>
<p id="section-6-1">add the following objects to the IANA vCon registries<a href="#section-6-1" class="pilcrow">¶</a></p>
<div id="room-object-and-registry">
<section id="section-6.1">
        <h3 id="name-room-object-and-registry">
<a href="#section-6.1" class="section-number selfRef">6.1. </a><a href="#name-room-object-and-registry" class="section-name selfRef">Room object and registry</a>
        </h3>
<ul class="normal">
<li class="normal" id="section-6.1-1.1">
            <p id="section-6.1-1.1.1">id<a href="#section-6.1-1.1.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-6.1-1.2">
            <p id="section-6.1-1.2.1">name<a href="#section-6.1-1.2.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-6.1-1.3">
            <p id="section-6.1-1.3.1">avatar<a href="#section-6.1-1.3.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-6.1-1.4">
            <p id="section-6.1-1.4.1">subject<a href="#section-6.1-1.4.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-6.1-1.5">
            <p id="section-6.1-1.5.1">mood<a href="#section-6.1-1.5.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-6.1-1.6">
            <p id="section-6.1-1.6.1">description<a href="#section-6.1-1.6.1" class="pilcrow">¶</a></p>
</li>
        </ul>
</section>
</div>
<div id="room-description-object-and-registry">
<section id="section-6.2">
        <h3 id="name-room-description-object-and">
<a href="#section-6.2" class="section-number selfRef">6.2. </a><a href="#name-room-description-object-and" class="section-name selfRef">Room description object and registry</a>
        </h3>
<ul class="normal">
<li class="normal" id="section-6.2-1.1">
            <p id="section-6.2-1.1.1">type<a href="#section-6.2-1.1.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-6.2-1.2">
            <p id="section-6.2-1.2.1">lang<a href="#section-6.2-1.2.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-6.2-1.3">
            <p id="section-6.2-1.3.1">content<a href="#section-6.2-1.3.1" class="pilcrow">¶</a></p>
</li>
        </ul>
</section>
</div>
<div id="party-object-types">
<section id="section-6.3">
        <h3 id="name-party-object-types">
<a href="#section-6.3" class="section-number selfRef">6.3. </a><a href="#name-party-object-types" class="section-name selfRef">Party object types</a>
        </h3>
<ul class="normal">
<li class="normal" id="section-6.3-1.1">
            <p id="section-6.3-1.1.1">im_uri<a href="#section-6.3-1.1.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-6.3-1.2">
            <p id="section-6.3-1.2.1">role<a href="#section-6.3-1.2.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-6.3-1.3">
            <p id="section-6.3-1.3.1">thumbprint<a href="#section-6.3-1.3.1" class="pilcrow">¶</a></p>
</li>
        </ul>
</section>
</div>
<div id="dialog-object-types">
<section id="section-6.4">
        <h3 id="name-dialog-object-types">
<a href="#section-6.4" class="section-number selfRef">6.4. </a><a href="#name-dialog-object-types" class="section-name selfRef">Dialog object types</a>
        </h3>
<ul class="normal">
<li class="normal" id="section-6.4-1.1">
            <p id="section-6.4-1.1.1">salt<a href="#section-6.4-1.1.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-6.4-1.2">
            <p id="section-6.4-1.2.1">replaces<a href="#section-6.4-1.2.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-6.4-1.3">
            <p id="section-6.4-1.3.1">relative_time<a href="#section-6.4-1.3.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-6.4-1.4">
            <p id="section-6.4-1.4.1">expires<a href="#section-6.4-1.4.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-6.4-1.5">
            <p id="section-6.4-1.5.1">in_reply_to<a href="#section-6.4-1.5.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-6.4-1.6">
            <p id="section-6.4-1.6.1">mimi_extensions<a href="#section-6.4-1.6.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-6.4-1.7">
            <p id="section-6.4-1.7.1">franking_tag<a href="#section-6.4-1.7.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-6.4-1.8">
            <p id="section-6.4-1.8.1">frank<a href="#section-6.4-1.8.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-6.4-1.9">
            <p id="section-6.4-1.9.1">status<a href="#section-6.4-1.9.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-6.4-1.10">
            <p id="section-6.4-1.10.1">disposition<a href="#section-6.4-1.10.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-6.4-1.11">
            <p id="section-6.4-1.11.1">language<a href="#section-6.4-1.11.1" class="pilcrow">¶</a></p>
</li>
        </ul>
</section>
</div>
<div id="dialogtype-object-types">
<section id="section-6.5">
        <h3 id="name-dialog_type-object-types">
<a href="#section-6.5" class="section-number selfRef">6.5. </a><a href="#name-dialog_type-object-types" class="section-name selfRef">dialog_type object types</a>
        </h3>
<ul class="normal">
<li class="normal" id="section-6.5-1.1">
            <p id="section-6.5-1.1.1">tombstone<a href="#section-6.5-1.1.1" class="pilcrow">¶</a></p>
</li>
        </ul>
</section>
</div>
<div id="multipart-object-type">
<section id="section-6.6">
        <h3 id="name-multi_part-object-type">
<a href="#section-6.6" class="section-number selfRef">6.6. </a><a href="#name-multi_part-object-type" class="section-name selfRef">multi_part object type</a>
        </h3>
<ul class="normal">
<li class="normal" id="section-6.6-1.1">
            <p id="section-6.6-1.1.1">part_semantics<a href="#section-6.6-1.1.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-6.6-1.2">
            <p id="section-6.6-1.2.1">parts<a href="#section-6.6-1.2.1" class="pilcrow">¶</a></p>
</li>
        </ul>
</section>
</div>
<div id="parts">
<section id="section-6.7">
        <h3 id="name-parts">
<a href="#section-6.7" class="section-number selfRef">6.7. </a><a href="#name-parts" class="section-name selfRef">parts</a>
        </h3>
<ul class="normal">
<li class="normal" id="section-6.7-1.1">
            <p id="section-6.7-1.1.1">part<a href="#section-6.7-1.1.1" class="pilcrow">¶</a></p>
</li>
        </ul>
</section>
</div>
<div id="part-object-type">
<section id="section-6.8">
        <h3 id="name-part-object-type">
<a href="#section-6.8" class="section-number selfRef">6.8. </a><a href="#name-part-object-type" class="section-name selfRef">part object type</a>
        </h3>
<ul class="normal">
<li class="normal" id="section-6.8-1.1">
            <p id="section-6.8-1.1.1">disposition<a href="#section-6.8-1.1.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-6.8-1.2">
            <p id="section-6.8-1.2.1">language<a href="#section-6.8-1.2.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-6.8-1.3">
            <p id="section-6.8-1.3.1">part_index<a href="#section-6.8-1.3.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-6.8-1.4">
            <p id="section-6.8-1.4.1">cardinality<a href="#section-6.8-1.4.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-6.8-1.5">
            <p id="section-6.8-1.5.1">mimetype<a href="#section-6.8-1.5.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-6.8-1.6">
            <p id="section-6.8-1.6.1">encoding<a href="#section-6.8-1.6.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-6.8-1.7">
            <p id="section-6.8-1.7.1">body<a href="#section-6.8-1.7.1" class="pilcrow">¶</a></p>
</li>
        </ul>
</section>
</div>
<div id="externalpart-object-type">
<section id="section-6.9">
        <h3 id="name-external_part-object-type">
<a href="#section-6.9" class="section-number selfRef">6.9. </a><a href="#name-external_part-object-type" class="section-name selfRef">external_part object type</a>
        </h3>
<ul class="normal">
<li class="normal" id="section-6.9-1.1">
            <p id="section-6.9-1.1.1">mediatype<a href="#section-6.9-1.1.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-6.9-1.2">
            <p id="section-6.9-1.2.1">url<a href="#section-6.9-1.2.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-6.9-1.3">
            <p id="section-6.9-1.3.1">expires<a href="#section-6.9-1.3.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-6.9-1.4">
            <p id="section-6.9-1.4.1">size<a href="#section-6.9-1.4.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-6.9-1.5">
            <p id="section-6.9-1.5.1">description<a href="#section-6.9-1.5.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-6.9-1.6">
            <p id="section-6.9-1.6.1">filename<a href="#section-6.9-1.6.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-6.9-1.7">
            <p id="section-6.9-1.7.1">content_hash<a href="#section-6.9-1.7.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-6.9-1.8">
            <p id="section-6.9-1.8.1">cached<a href="#section-6.9-1.8.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-6.9-1.9">
            <p id="section-6.9-1.9.1">enc_alg<a href="#section-6.9-1.9.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-6.9-1.10">
            <p id="section-6.9-1.10.1">key<a href="#section-6.9-1.10.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-6.9-1.11">
            <p id="section-6.9-1.11.1">nonce<a href="#section-6.9-1.11.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-6.9-1.12">
            <p id="section-6.9-1.12.1">aad<a href="#section-6.9-1.12.1" class="pilcrow">¶</a></p>
</li>
        </ul>
</section>
</div>
<div id="partyhistory-object-type">
<section id="section-6.10">
        <h3 id="name-party_history-object-type">
<a href="#section-6.10" class="section-number selfRef">6.10. </a><a href="#name-party_history-object-type" class="section-name selfRef">party_history object type</a>
        </h3>
<ul class="normal">
<li class="normal" id="section-6.10-1.1">
            <p id="section-6.10-1.1.1">originator<a href="#section-6.10-1.1.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-6.10-1.2">
            <p id="section-6.10-1.2.1">name<a href="#section-6.10-1.2.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-6.10-1.3">
            <p id="section-6.10-1.3.1">role<a href="#section-6.10-1.3.1" class="pilcrow">¶</a></p>
</li>
        </ul>
</section>
</div>
<div id="partyevent-object-type">
<section id="section-6.11">
        <h3 id="name-party_event-object-type">
<a href="#section-6.11" class="section-number selfRef">6.11. </a><a href="#name-party_event-object-type" class="section-name selfRef">party_event object type</a>
        </h3>
<ul class="normal">
<li class="normal" id="section-6.11-1.1">
            <p id="section-6.11-1.1.1">add<a href="#section-6.11-1.1.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-6.11-1.2">
            <p id="section-6.11-1.2.1">self_add<a href="#section-6.11-1.2.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-6.11-1.3">
            <p id="section-6.11-1.3.1">leave<a href="#section-6.11-1.3.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-6.11-1.4">
            <p id="section-6.11-1.4.1">remove<a href="#section-6.11-1.4.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-6.11-1.5">
            <p id="section-6.11-1.5.1">ban<a href="#section-6.11-1.5.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-6.11-1.6">
            <p id="section-6.11-1.6.1">update<a href="#section-6.11-1.6.1" class="pilcrow">¶</a></p>
</li>
        </ul>
</section>
</div>
<div id="attachment-object-type">
<section id="section-6.12">
        <h3 id="name-attachment-object-type">
<a href="#section-6.12" class="section-number selfRef">6.12. </a><a href="#name-attachment-object-type" class="section-name selfRef">attachment object type</a>
        </h3>
<ul class="normal">
<li class="normal" id="section-6.12-1.1">
            <p id="section-6.12-1.1.1">dialog_object_ref<a href="#section-6.12-1.1.1" class="pilcrow">¶</a></p>
</li>
        </ul>
</section>
</div>
</section>
</div>
<div id="sec-normative-references">
<section id="section-7">
      <h2 id="name-normative-references">
<a href="#section-7" class="section-number selfRef">7. </a><a href="#name-normative-references" class="section-name selfRef">Normative References</a>
      </h2>
<dl class="references">
<dt id="I-D.ietf-mimi-content">[I-D.ietf-mimi-content]</dt>
      <dd>
<span class="refAuthor">Mahy, R.</span>, <span class="refTitle">"More Instant Messaging Interoperability (MIMI) message content"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-ietf-mimi-content-07</span>, <time datetime="2025-07-07" class="refDate">7 July 2025</time>, <span>&lt;<a href="https://datatracker.ietf.org/doc/html/draft-ietf-mimi-content-07">https://datatracker.ietf.org/doc/html/draft-ietf-mimi-content-07</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="I-D.ietf-mimi-protocol">[I-D.ietf-mimi-protocol]</dt>
      <dd>
<span class="refAuthor">Barnes, R.</span>, <span class="refAuthor">Hodgson, M.</span>, <span class="refAuthor">Kohbrok, K.</span>, <span class="refAuthor">Mahy, R.</span>, <span class="refAuthor">Ralston, T.</span>, and <span class="refAuthor">R. Robert</span>, <span class="refTitle">"More Instant Messaging Interoperability (MIMI) using HTTPS and MLS"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-ietf-mimi-protocol-04</span>, <time datetime="2025-07-07" class="refDate">7 July 2025</time>, <span>&lt;<a href="https://datatracker.ietf.org/doc/html/draft-ietf-mimi-protocol-04">https://datatracker.ietf.org/doc/html/draft-ietf-mimi-protocol-04</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="I-D.ietf-vcon-vcon-core">[I-D.ietf-vcon-vcon-core]</dt>
      <dd>
<span class="refAuthor">Petrie, D.</span>, <span class="refTitle">"The JSON format for vCon - Conversation Data Container"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-ietf-vcon-vcon-core-01</span>, <time datetime="2025-10-15" class="refDate">15 October 2025</time>, <span>&lt;<a href="https://datatracker.ietf.org/doc/html/draft-ietf-vcon-vcon-core-01">https://datatracker.ietf.org/doc/html/draft-ietf-vcon-vcon-core-01</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="I-D.mahy-mimi-app-components">[I-D.mahy-mimi-app-components]</dt>
      <dd>
<span class="refAuthor">Mahy, R.</span>, <span class="refTitle">"Application State Components for More Instant Messaging Interoperability (MIMI)"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-mahy-mimi-app-components-01</span>, <time datetime="2025-02-11" class="refDate">11 February 2025</time>, <span>&lt;<a href="https://datatracker.ietf.org/doc/html/draft-mahy-mimi-app-components-01">https://datatracker.ietf.org/doc/html/draft-mahy-mimi-app-components-01</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC2119">[RFC2119]</dt>
      <dd>
<span class="refAuthor">Bradner, S.</span>, <span class="refTitle">"Key words for use in RFCs to Indicate Requirement Levels"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 2119</span>, <span class="seriesInfo">DOI 10.17487/RFC2119</span>, <time datetime="1997-03" class="refDate">March 1997</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc2119">https://www.rfc-editor.org/rfc/rfc2119</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC5646">[RFC5646]</dt>
      <dd>
<span class="refAuthor">Phillips, A., Ed.</span> and <span class="refAuthor">M. Davis, Ed.</span>, <span class="refTitle">"Tags for Identifying Languages"</span>, <span class="seriesInfo">BCP 47</span>, <span class="seriesInfo">RFC 5646</span>, <span class="seriesInfo">DOI 10.17487/RFC5646</span>, <time datetime="2009-09" class="refDate">September 2009</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc5646">https://www.rfc-editor.org/rfc/rfc5646</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8174">[RFC8174]</dt>
      <dd>
<span class="refAuthor">Leiba, B.</span>, <span class="refTitle">"Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 8174</span>, <span class="seriesInfo">DOI 10.17487/RFC8174</span>, <time datetime="2017-05" class="refDate">May 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc8174">https://www.rfc-editor.org/rfc/rfc8174</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC9420">[RFC9420]</dt>
    <dd>
<span class="refAuthor">Barnes, R.</span>, <span class="refAuthor">Beurdouche, B.</span>, <span class="refAuthor">Robert, R.</span>, <span class="refAuthor">Millican, J.</span>, <span class="refAuthor">Omara, E.</span>, and <span class="refAuthor">K. Cohn-Gordon</span>, <span class="refTitle">"The Messaging Layer Security (MLS) Protocol"</span>, <span class="seriesInfo">RFC 9420</span>, <span class="seriesInfo">DOI 10.17487/RFC9420</span>, <time datetime="2023-07" class="refDate">July 2023</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc9420">https://www.rfc-editor.org/rfc/rfc9420</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
</div>
<div id="json-schema">
<section id="appendix-A">
      <h2 id="name-json-schema">
<a href="#appendix-A" class="section-number selfRef">Appendix A. </a><a href="#name-json-schema" class="section-name selfRef">JSON Schema</a>
      </h2>
<p id="appendix-A-1"><strong>TODO</strong><a href="#appendix-A-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="change-list">
<section id="appendix-B">
      <h2 id="name-change-list">
<a href="#appendix-B" class="section-number selfRef">Appendix B. </a><a href="#name-change-list" class="section-name selfRef">Change list</a>
      </h2>
<div id="changes-in-draft-ietf-vcon-mimi-messages-00">
<section id="appendix-B.1">
        <h3 id="name-changes-in-draft-ietf-vcon-">
<a href="#appendix-B.1" class="section-number selfRef">B.1. </a><a href="#name-changes-in-draft-ietf-vcon-" class="section-name selfRef">Changes in draft-ietf-vcon-mimi-messages-00</a>
        </h3>
<ul class="normal">
<li class="normal" id="appendix-B.1-1.1">
            <p id="appendix-B.1-1.1.1">adopted as a WG item<a href="#appendix-B.1-1.1.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="appendix-B.1-1.2">
            <p id="appendix-B.1-1.2.1">added IANA registrations under the new framework<a href="#appendix-B.1-1.2.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="appendix-B.1-1.3">
            <p id="appendix-B.1-1.3.1">updated references<a href="#appendix-B.1-1.3.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="appendix-B.1-1.4">
            <p id="appendix-B.1-1.4.1">refactor to use the new message_id field name from core<a href="#appendix-B.1-1.4.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="appendix-B.1-1.5">
            <p id="appendix-B.1-1.5.1">more case adjustments<a href="#appendix-B.1-1.5.1" class="pilcrow">¶</a></p>
</li>
        </ul>
</section>
</div>
<div id="changes-in-draft-mahy-vcon-mimi-messages-02">
<section id="appendix-B.2">
        <h3 id="name-changes-in-draft-mahy-vcon-">
<a href="#appendix-B.2" class="section-number selfRef">B.2. </a><a href="#name-changes-in-draft-mahy-vcon-" class="section-name selfRef">Changes in draft-mahy-vcon-mimi-messages-02</a>
        </h3>
<ul class="normal">
<li class="normal" id="appendix-B.2-1.1">
            <p id="appendix-B.2-1.1.1">adjust to make consistent with new syntax of MIMI content (add salt, removed lastSeen, in_reply_to is just a message id, expires is an object to handle relative expiration, added mimi_extensions).<a href="#appendix-B.2-1.1.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="appendix-B.2-1.2">
            <p id="appendix-B.2-1.2.1">use a different field from content_hash when attaching an ExternalPart that did not have a hash in the MIMI message.<a href="#appendix-B.2-1.2.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="appendix-B.2-1.3">
            <p id="appendix-B.2-1.3.1">allow the parties list of 0 to indicate sending to every active participant in the room.<a href="#appendix-B.2-1.3.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="appendix-B.2-1.4">
            <p id="appendix-B.2-1.4.1">added a description of using party_history to track changes to the participant list.<a href="#appendix-B.2-1.4.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="appendix-B.2-1.5">
            <p id="appendix-B.2-1.5.1">added room metadata, and a way to modify it<a href="#appendix-B.2-1.5.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="appendix-B.2-1.6">
            <p id="appendix-B.2-1.6.1">added support for message "tombstones"<a href="#appendix-B.2-1.6.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="appendix-B.2-1.7">
            <p id="appendix-B.2-1.7.1">use mediatype instead of mimetype throughout<a href="#appendix-B.2-1.7.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="appendix-B.2-1.8">
            <p id="appendix-B.2-1.8.1">make the case of field names more consistent<a href="#appendix-B.2-1.8.1" class="pilcrow">¶</a></p>
</li>
        </ul>
</section>
</div>
</section>
</div>
<div id="acknowledgments">
<section id="appendix-C">
      <h2 id="name-acknowledgments">
<a href="#name-acknowledgments" class="section-name selfRef">Acknowledgments</a>
      </h2>
<p id="appendix-C-1">TODO acknowledge.<a href="#appendix-C-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="authors-addresses">
<section id="appendix-D">
      <h2 id="name-authors-address">
<a href="#name-authors-address" class="section-name selfRef">Author's Address</a>
      </h2>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Rohan Mahy</span></div>
<div dir="auto" class="left"><span class="org">Rohan Mahy Consulting Services</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:rohan.ietf@gmail.com" class="email">rohan.ietf@gmail.com</a>
</div>
</address>
</section>
</div>
<script>const toc = document.getElementById("toc");
toc.querySelector("h2").addEventListener("click", e => {
  toc.classList.toggle("active");
});
toc.querySelector("nav").addEventListener("click", e => {
  toc.classList.remove("active");
});
</script>
</body>
</html>
